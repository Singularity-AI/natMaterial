<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
 
<style type="text/css">
body
{
    margin-left:  30px;
    margin-right: 30px;
};

P
{
    font-family: Tahoma;
    font-size: 10pt;
};

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

a:hover {
    background-color: #cccccc;
}


hr {
    clear: both;
    height: 1px;
    color: #242424;
    background-color: transparent;
}

h1, h2, h3 {
    color: #242424;
    clear: left;
    font: 100% Tahoma, Helvetica, Arial, sans-serif;
    margin-bottom: 0.5em;
    padding-top: 0.5em;
	border-radius: 10px;
	padding: 5px;
}

top {
	width: 100%;
}


#i {
    color: #ff1010;
}
tt{
	font-family: "Arial";
    font-size: 80%;
	color: #006600;
}
em{
	font-family: "Arial";
    font-size: 80%;
	font-weight: bold;
	border-style:solid;
	border-color: #abe876;
    color: #1632cc;
}
bc{
	font-family: "Arial";
	font-size: 80%;
	font-weight: bold;
    color: #990000;
	background-color: #fcf8c7;
}
ks{
	font-family: "Arial";
	font-weight: bold;
    color: #0000CD	;
	 
}
kc{
	font-family: "Arial";
	font-weight: bold;
    color: #008000	;
	 
}
pre{
	font-family: "Consolas";
	font-size: 85%;
	background-color: #f5f5f5;
	border: 1.5px solid silver;
	padding: 5px;
}
m{
	font-family: "Helvetica";
	line-height: 100%;
 	font-size: 75%;
}
div.body{
	width: 700px;
    font-size: 15px;
}
k{
    color: #990000;
	font-weight: bold;
}
h1 {
    font-size: 150%;
    background-color: #b2c0ff;
	padding: 10px; 
}

h2 {
    background-color: #9ed8ff;
    font-size: 130%;
}

h3 {
	background-color: #e6ccff;
    font-size: 100%;
}
h4 {
    background-color: #C0F0E0;
    font-size: 100%;
	width: 95%;
	border-radius: 5px;
	padding: 2px;
}
h5 {
    background-color: #d5ffb0;
    font-size: 100%;
	
}    
div.req{
	background-color: #d9ffb3;
    font-size: 18px;
	width: 700px;
    border: 3px solid green;
    padding: 15px;
    margin: 10px;
}       
div.remark{
	background-color: #E3F2FD;	
    border: 1.5px solid #d5f2ed;
    padding: 15px;
    margin: 10px;
	border-radius: 25px;
}  
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
} 

ol, ul, li {
  margin: 0;
  margin-left: 10px;
  padding: 0;
  padding-bottom: 5px;
}     

table, th, td {
	border: 1px solid black;
}

img {
	border: 1.5px solid #d5f2ed
	
}

a, a:visited, a:active, a:link, a:hover {
    text-decoration: underline;
    color: #545454;
    background-color: transparent;
}

div.wrapdesc{
	width: 90%;
	margin: auto;
}

div.imagedesc{
	width: 85%;
	margin: auto;
}
</style>
    
<head>
   
<title>ITelAppl</title></head>
    
<body>
<div id="top">
<h1>ITel applications<font size="5"></font> </h1>
</div>  

<div class="body"> 
<h2>Introduction</h2>
<ul>
<li><a href="https://dev-itel.atlassian.net/wiki/spaces/NEXTAGORA/overview" target="web">Confluence space: Nextagora</a> </li>
<li><a href="https://dev-itel.atlassian.net/wiki/spaces/UNIBO/overview" target="web">Confluence space: UNIBO</a> </li>
<li><a href="https://bitbucket.org/itelunibo/workspace/projects/" target="web">Projects on bitbucket</a> </li>
<li><a href="https://bitbucket.org/itelunibo/overviewrepo/src/master/it.unibo.itel/userDocs/3-LogicalArch/HDA_Disi.html" target="web">HDA_Disi.html (overviewrepo)</a> </li>
<hr/>
<!-- PROTECTED
<li><a href="http://htmlpreview.github.io/?https://bitbucket.org/itelunibo/overviewrepo/src/master/it.unibo.itel/userDocs/3-LogicalArch/HDA_Disi.html" target="web"> 
overviewrepo/src/master/it.unibo.itel/userDocs/3-LogicalArch/HDA_Disi.html</a></li>
-->
<li><a href="../../it.unibo.hapi2.2/userDocs/HapiUsage.html" target="web"> DISI - HapiUsage</a> (on <tt>.it.unibo.hapi2.2/userDocs/</tt>)</li>

 
<li><a href="../../../natMaterial/health/userDocs/HealthReferences.html" target="web"> 
DISI - HealthReferences.html</a> (on natMaterial/health/userDocs/)</li>
 
<li><a href="../../it.unibo.mirth.java/userDocs/MirthExperiments.html" target="web"> DISI - MirthExperiments</a> (on <tt>.health/userDocs/</tt>)</li>

</ul>
  
 
<h2>Overview</h2>
Sm@rtEven ha due tipi di UML-actors:
<ul>
<li><k>Operatore</k><br/>  
Un agente specializzato (ad es. un medico) che accede mediante
un browser ad una (unica?) piattaforma ITel installata presso un centro (ad es. ospedale). </li>
<li><k>Paziente</k><br>
Un agente non specializzato (una persona) che accede ai servizi erogati da una piattaforma ITel mediante computer e/o smartphone. </li>
</ul>

Terminologia:

<ul>
<li><m><ks>Area Geografica</ks></m>: una zona del mondo (con un proprio <m><ks>TimeZone</ks></m> ) </li>

<li><m><ks>Core-Itel</ks></m>: nucleo sempre presente in ogni installazione ITel: si veda
<a href="https://dev-itel.atlassian.net/wiki/spaces/NEXTAGORA/pages/9568259/Modellazione+del+CORE" target="webcode">
ITel: Modellazione del CORE</a></li>

<li><m><ks>CentroBase</ks></m>: la struttura, entro una precisa <m><ks>Area Geografica</ks></m>, 
in cui è installato il <m><ks>Core Itel</ks></m> e  un insieme di <m><ks>ProdottoDiContesto</ks></m></li>

<li><m><ks>ProdottoDiContesto</ks></m> (ex adapter): un 'modulo' installabile nel <m><ks>CentroBase</ks></m> 
(o forse anche <k>remoto ???</k>) che fornisce servizi specializzati in un certo dominio applicativo (ad es. HealtCare)</li>

<li><m><ks>Paziente</ks></m>: una persona modellata usando (un <k>sottoinsieme ???</k>  di) 
<a href="https://www.hl7.org/fhir/patient.html" target="webcode">FHIR Patient</a>, che vive in una determiata <m><ks>Area Geografica</ks></m>
ed e' associato ad un (o <k>più ???</k>) <m><ks>CentroHealth</ks></m>  </li>

<li><m><ks>CentroHealth</ks></m>: una struttura specializzata, entro una precisa <m><ks>Area Geografica</ks></m>,
che si occupa dei dati e dello stato di salute del <m><ks>Paziente</ks></m></li>

<li><m><ks>Enrollment</ks></m>: iscrizione nel <m><ks>CentroBase</ks></m> di un paziente <k>già associato</k> 
a un (o <k>più ???</k>) <m><ks>CentroHealth</ks></m></li>

<li><m><ks>Operatore</ks></m>: un agente (<i>Medico, Infermiere, Admin</i>) che utilizza il <m><ks>CentroBase</ks></m>
associato a un (o <k>sottoinsiente ???</k>) di <m><ks>Paziente-enrolled</ks></m> </li>

<li><m><ks>HealthDevice</ks></m>: un dispositivo capace di effettuare misure (glicemia, pressione, etc) su un paziente</li>

<li><m><ks>ValoreMisurato</ks></m>: un dato ricavato dall'usp di un <m><ks>HealthDevice</ks></m> </li>

<li><m><ks>Piano terapeutico</ks></m>: un <i>Care Plan</i> (<k>sottoinsieme</k> ??? di)
<a href="https://www.hl7.org/fhir/careplan.html" target="webcode">FHIR careplan</a> relativo a un preciso
<m><ks>Paziente</ks></m>
</li>
</ul>

<h3>User stories: operatore</h3>
Come <k>Operatore</k> 
<ol>
<li>poter introdurre/eliminare <m><ks>Enrollment</ks></m> di un paziente </li>
<li>poter inviare/ricevere dati a/da  uno o più <m><ks>CentroHealth</ks></m> associati al paziente</li>
<li>ricevere notifiche su modifiche del <m><ks>Piano terapeutico</ks></m> del <m><ks>Paziente</ks></m> da parte di un <m><ks>CentroHealth</ks></m></li>
<li>inviare notifiche su modifiche del <m><ks>Piano terapeutico</ks></m> al <m><ks>Paziente</ks></m>  </li>
<li>monitorare un <m><ks>ValoreMisurato</ks></m> effettuato dal <m><ks>Paziente</ks></m> e/o il suo storico
e operare di conseguenza, anche inviando notifiche </li>



</ol> 
<h3>User stories: paziente</h3>
Come <k>paziente</k>:

<ol>
 
<li>ricevere supporto alla realizzazione di un <m><ks>Piano terapeutico</ks></m></li>
<li>ricevere notifiche su modifche del <m><ks>Piano terapeutico</ks></m></li>
<li>avere supporto per ottenere (via <a href="https://it.wikipedia.org/wiki/Bluetooth" target="web">Bluetooth</a>) 
un <m><ks>ValoreMisurato</ks></m> e inviarlo al <m><ks>CentroBase</ks></m> </li>

<li>effettuare un <ks>teleconsulto</ks></li>

</ol> 

<h3>User stories: Sm@rtEven</h3>
Si veda:
<ul>
<li><a href="https://miro.com/app/board/o9J_kt4wisk=/" target="confluence">ITel : Mappa funzioni SamrtSuite</a></li>
<li><a href="https://dev-itel.atlassian.net/wiki/spaces/NEXTAGORA/pages/50200577/Documentazione+Requisiti" target="confluence">
ITel : Requisiti</a></li>
<li><a href="https://dev-itel.atlassian.net/wiki/spaces/NEXTAGORA/pages/112263181/Sm+rtEven+-+Punti+Fissi" target="confluence">
ITel : Sm@rtEven Punti+Fissi</a></li>

</ul>



<table style="width:100%" border="1">
<tr>
<td style="width:50%">
 
<ks>Telemedicina</ks> ( Amministratore - Operatore )<br/>
<k>Amministratore</k>:
<ul>
<li>Gestione Utenti</li>
<li>Gestione Pazienti</li>
<li>Gestione Profili</li>
<li>Schemi terapeutici (azioni/misurzioni programmate)</li>
<li>Monitoraggio (allarmi, diario)</li>
<li>Gestione anagrafiche</li>
<li>Gestione questionari</li>
<li>Notifiche</li>
<li>Creazione report</li>
<li>Strumenti</li>
</ul>
<k>Operatore</k>: tutto tranne creare utenti<br/>
<br/> 
 
<ks>Teleconsulto</ks>
</td>
<td>
Altri moduli (out if DISI scope)
<ul>
<li>Sm@rtC6</li>
<li>Sm@rtWelcome</li>
<li>Sm@rtReady</li>
<li>Sm@rtContact</li>
<li>Sm@rtRecall</li>
<li>Sm@rtScreeing</li>
<li>Sm@rtSensor</li>
<li>Sm@rtConnect</li>
<li>Sm@rtTest</li>
<li>Sm@rtADI</li>
</ul>
</td>
</tr>
</table>
 


<h2>Requirements: <m><ks>ProdottoDiContesto</ks></m> HEALTH</h2> 
La modularizzazione di Nestagora ha portato alla opportunità di incapsulare entro il <m><ks>ProdottoDiContesto</ks></m> 
denominato <a href="https://bitbucket.org/itelunibo/workspace/projects/HDA" target="confluence">
<k>Health Data Adapter</k></a> il problema della interazione con l'insieme di <tt>N>=1</tt> 
<m><ks>CentroHealth</ks></m> cui è associato un paziente.
<br/><br/>
L'assunzione è che le informazioni scambiate da ITel con un <m><ks>CentroHealth</ks></m> siano codificate in modo standard tramite:

<ul>
<li>scambio di dati <a href="https://www.hl7.org/implement/standards/product_brief.cfm?product_id=185" target="web">HL7 Version 2</a></li>
<li>scambio di informazioni espresse in <a href="http://hl7.org/fhir/R4/index.html" target="webcode">FHIR</a></li>
</ul>

Le informazioni scambiate da ITel  con <k>Health Data Adapter</k></a> sono codificate usando  un sottoinsieme di
<a href="http://hl7.org/fhir/R4/index.html" target="webcode">FHIR</a>.<br/>

Qui sotto
(si veda <a href="https://dev-itel.atlassian.net/wiki/spaces/UNIBO/pages/142737409/FHIR+-+Itel+Scope" target="confluence">ITel-scope</a>)
sono evidenziati in giallo i concetti centrali e sottolineati in verde concetti secondari ma comunque di interesse ITel.<br/><br/>

<img src="./img/FHIR-ITel.png" alt="FHIR-ITel.png" width="80%"><br/>
 Per i dettagli sui <k>Domini di riferimento</k> si veda:
<a href="https://dev-itel.atlassian.net/wiki/spaces/UNIBO/pages/142737409/FHIR+-+Itel+Scope" target="confluence">FHIR - Itel Scope</a>

<h2>Requirement analysis</h2>

<ol>
<li>Le richieste provenienti da Itel verso <a href="https://bitbucket.org/itelunibo/workspace/projects/HDA" target="confluence">
<k>Health Data Adapter</k></a> dovrebbero contenere indicazioni sul <m><ks>CentroHealth</ks></m> implicato nella richiesta o
contenere informazioni da cui dedurre quale <m><ks>CentroHealth</ks></m> consultare.
</li>
<li>...</li>
</ol>

<h2>Problem analysis</h2>
Come premessa e' opportuno consultare la discussione sui <i>Modelli di interazione</i> presentata in:

<a href="https://dev-itel.atlassian.net/wiki/spaces/UNIBO/pages/142704775/Health+-+Interazione" target="confluence">Health - Interazione</a>.
<br/><br/>

Prime osservazioni pssono essere:
<ul>
<li>Sostituire un oggetto con un <k>attore</k> non implica ancora l'insorgere di grosse problematiche relative ai sistemi distribuiti.
Tutto può avveire ancora su base locale con interazioni scambio di messaggi tra <k>oggetti attivi</k>, ciascuno dotato
di una <k>input queue</k>. In questo modo si evitano a priori problemi legati all'suo di di memoria comune.
</li>
<li>Attualmente il DISI utilizza attori basati su <k>Kotlin</k> che implicano meno librerie e sembrano anche più performanti rispetto ad attori
Akka. Si noti che Kotlin sta diventando il linguaggio di riferimento per applicazini su Android.
</li>
<li>
Si ricorda che si possono attivare migliaia di attori poichè gli attori sono gestiti con schemi 'a coroutine'.</li>

</ul>

<h3>Logical architecture</h3>
Si ricorda la legenda:
<img src="./img/components.png" alt="components.png" width="30%"  />

<h4>Oggetti + REST calls</h4>
<img src="./img/itelDisiHealthArch0.png" alt="itelDisiHealthArch0.png" width="80%"><br/>

<h3>Problemi FONDAMENTALI DA DISCUTERE</h3>
<ol>
<li>Cosa intendiamo esattamente per interazione REST?</li>
<li>Come viene introdotto il concetto di <k>risorsa</k> implicato dalla interazione REST</li>
<li>Una chiamata REST sincrona pone grossi problemi, ben noti. In cosa consiste una chiamata <k>REST asincrona</k>?</li>
<li>In che modo e' organizzato un server REST quando deve gestire una chiamata asincrona?</li>
<li>Le <a href="https://cloud.google.com/healthcare" target="web">API Cloud Healthcare</a> che sembrano
usare le <a href="https://en.wikipedia.org/wiki/GRPC" target="web">gRPC</a>
(si veda anche <a href="https://cloud.google.com/endpoints/docs/grpc/about-grpc" target="web">
Google Cloud Endpoints for gRPC</a>) possono rappresentare uno standard accettabile per la interoperabilita'
tra diversi <m><ks>CentriHealth</ks></m>? 
</li>
<li>In che modo un server REST <k>notifica informazioni</k> ai client(browser)?:<br/>
<ul>
<li>Usa <a href="hhttps://en.wikipedia.org/wiki/WebSocket" target="web">websockets</a> ( wikipedia) </li>
<li>Usa <a href="https://www.w3schools.com/html/html5_serversentevents.asp" target="web">
HTML Server-Sent Events(SSE) API</a>. Si veda anche 
<a href="https://en.wikipedia.org/wiki/Server-sent_events" target="web">Server-sent events</a> ( wikipedia)
</li>
<li>Usa un broker <a href="https://it.wikipedia.org/wiki/MQTT" target="web">MQTT</a> ( wikipedia)</li>
<li>Usa <a href="https://en.wikipedia.org/wiki/WebSub" target="web">WebSub</a> ( wikipedia) </li>

<li>
 
</ul>
</li>
</ol>
 

<br/><br/>

<h4>Attori + REST calls</h4>

<img src="./img/itelDisiHealthArch1.png" alt="itelDisiHealthArch1.png" width="80%"><br/>
<br/>
<h2>Test plans</h2> 
 
<h2>Project</h2> 
<h4>Riferimenti al 24/07</h4>
<ul>
<li> <a href="https://dev-itel.atlassian.net/wiki/spaces/NEXTAGORA/pages/50298891/Documentazione+Architetturale" target="confluence">
ITel : Architettura</a></li>

<li> <a href="https://dev-itel.atlassian.net/wiki/spaces/NEXTAGORA/pages/50561114/Multitenancy+Access+Control" target="confluence">
ITel : Multitenancy & Access Control</a></li>

<li> <a href="https://dev-itel.atlassian.net/wiki/spaces/NEXTAGORA/pages/131497985/Architettura+Security" target="confluence">
ITel : Security</a></li>

<li>


</li>
</ul>

<h2>Testing</h2> 
 
<h2>Deployment</h2> 

 


<h2>Maintenance</h2> 
 

<table style="width:100%" border="1">
<tr>
<td style="width:50%">
</td>
<td></td>
</tr>
</table>
	      	
<br/><br/> 	
</div>  

<div style="background-color:rgba(86, 56, 253, 0.9); width:60%;text-align:left;color:white">
By AN - DISI antonio.natali@unibo.it  
<!-- <img src="./img/emiglio.png" alt="mbot" width="15%" height="15%"> -->
</div> 
</body>
</html>